解读黄皮书

初链：高性能去中心化公开账本

从黄皮书中，可以看初链是一种存在于共享计算环境中的加密货币。
它的特点具有区块链的去中心化性，以及交易透明性、自治权、不可篡改特性。
初链采用'混合共识协议'，这原因就是为了弥补前两代公链比特币与以太坊每秒交易处理量(TPS)过低导致
无法应用到实质商业应用开发的弊病。在保证去中心化本质的基础上,实现高性能、高可靠性的公链开发,以承载规模化商
用Dapp运行的目标。

混合共识协议解读：

	初链的混合共识协议采用Fruitchain而不是慢链（snailchain）中的Nakamoto（传统链），以防止1/3-ε腐败（哈希功率）为随机小常数ε，以获得最佳韧性。
	每日链下共识协议在DailyBFT中，委员会成员输出签署的每日日志哈希值，稍后将被混合共识协议使用。 这些签署的每日日志哈希满足完整性和不可伪造性。 在公钥生成器上，将公钥添加到公钥列表中。在接收到通信信号时，节点作为委员会成员进行有条件的选举。
	主要混合共识协议是一种新生成的节点，具有隐式消息路由，其中带有发送和接收的记录的历史记录。
	
初链技术优势：

1.解决物理时间限制：

	问题：默认情况下，传统的共识设计允许矿工/委员会成员/领导人在一个小的时间窗口内重新安排交易。这给一些分散的应用程序带来了一个问题，如商业交易所，交易公平性要求交易之间的时间顺序必须谨慎地保持，否则恶意(甚至是正常的理性)参与者将有动机重新订购交易，甚至插入自己的交易，以获得额外的利润。在高产量的情况下，这一激励将被放大。 更糟糕的是，这样的恶意重新排序是不可能区分的，因为自然网络等待时间将导致重新排序，并且这种延迟只能由接收机本身来观察，并且因此它具有关于网络等待时间的最终数量的证据 为了支持去中心化的广告交换。
	解决方案：
（1）来自任何节点的事务顺序根据其物理时间戳在内部保存。因此，这些事务的顺序顺序被严格执行。这将消除某些恶意重新排序的可能性，这种重新排序涉及来自同一个节点的两次交易。
（2）由BFT委员会输出的批量交易中的顺序严格按时间戳排序。
（3）节点不能操纵假物理时间戳。因为定时窗口的限制。 这种修改的一个明显缺点是，当参数不适合变化的网络延迟时，由于中止事务而导致吞吐量下降。另一个缺点是，BFT委员会成员仍然可以谎报当地时间，拒绝某些交易。然而，委员会成员无论如何都可以拒绝某些交易。但是，诚实的节点可能会拒绝无知的交易，因为它们的时钟不同步。这个问题可以通过增加对BFT委员会职能的限制来减少。稍后，我们将看到，要进入委员会，节点应该提供同步时钟的证据。

2.计算和数据分片，以及投机事务的执行：

	我们首先设计了一个基于分片的投机交易处理系统，在混合共识中，DailyBFT实例被索引为一个确定性序列DailyBFT [1 ... R] 。我们允许同时存在多个DailyBFT实例序列。准确地说，我们通过分片表示t-th DailyDFT序列，为了简单起见，我们将分片的数量固定为C，每一个DailyBFT是一个普通的分片，除了C普通分片，我们有一个由csize节点组成的主分片。主分片的工作是最后确定正常分片输出的顺序，以及在分布式事务处理系统中实现协调器。而普通的分片不是直接连接到混合协商一致组件，而是将日志提交给主分片，然后主分片与混合共识进行对话。我们只在数据扇区级别进行讨论。每个数据扇区DS[addr]都有rts, wts, readers, writers元数据。我们假设分区原则是公共的，并且给定地址addr，我们可以通过调用函数host(addr)来获得它的主机分片。 请注意，如果我们将每个正常的分片(当对方的数量不多)作为一个分布式处理单元处理，则可以将逻辑时间戳[29]的设计合并到分布式交易处理系统[18]中，这将增强交易的处理能力。在这里，我们使用了一个简化的MaaT版本，在这里我们不对其他交易的时间戳进行自动调整。 对于普通分片，除了一些改动以执行并行计算以外，严格按照DailyBFT的行为运行。
	
3.虚拟机中的智能合约

1.使用虚拟机的好处：

		对于现在部署有1000多个智能合约的以太坊,它除了是一次在最优化容器生态设计上粗浅的尝试
		之外一无是处。也有可能解决的方法,比如把容器运用到无服务器结构中。但想象一个多于2000个智能
		合约在线和并发请求的场景,比如想链码发送超过容器数量的调用请求,我们仍会面临同样的困境。途径
		就是给并发请求加上节流限制,但这将严重影响TPS。工程问题不应当成为我们达成目标的平静,因此初
		链仍然采用了以太坊虚拟机的设计。
		
2.初链虚拟机优势：
		初链在最大并发请求上加上一个限流率的阈值。这样从共识基础上限制了每秒并发交易数。工程技术方面不是一个瓶颈，在以太坊虚拟机（EVM）的基础上还支持如栈外内存，合约委托和中间调用值存储。
		初链基础架构将整合EVM和类似EVM字节码执行引擎来运行智能合约。我们会使用一个虚拟机来处理POW共识，另外一个虚拟机处理PBFT共识，都集成在全节点，因此它们可以处理按需调用。	TVM基于DailyBFT公链技术，与以下组件交互：
复用一些tendermint的想法，如ABCI（区块链应用编程接口），其提供了一个抽象层，允许在一个进程中运行的共识引擎管理另一个进程的应用状态；
适合dailyBFT的另外一个共识引擎。
权限化的以太坊虚拟机。
保证交易达成的RPC网关。 待办事项-正式定义TVM的过渡状态、智能合约部署策略以及将权限化的 VM部署到无权限链上的方法。 待办事项-定义参数以在POW和整个节点(POW和PBFT)之间切换

4.挖掘：
果实比矿块更容易开采，因此矿工们没有激励机制或形成采矿池。这使得PoW成为一个更公平的过程。
由于水果开采难度较低，很可能两种水果同时开采。 确定哪个有效的一种方法是通过选择具有较低散列值的那个。
直到他们写在一个块中后，果实才会稳定。因此，采矿奖励将支付给矿区的块矿工，然后块矿工会将奖励分配给矿区内的果实矿工。
果实链方案的一个优点是果实可以以任何顺序开采，这可以使采矿高度平行。与分片结合时，这将特别有用。

非PoW开采Truechain上的数据存储分为三个级别，
级别1：存储在每个PoW节点上，比如以太坊。 这是最永久的存储方式，也是效率最低的方式。不建议存储短文本以外的任何内容，例如关键信息的散列值。用户向PoW矿工支付燃气费。
级别2：将会有类似IPFS的文件系统将数据的有限副本分发给整个链中的存储节点。通常用于存储分布式应用程序以在True虚拟机上运行。用户将向矿工支付存储和检索费用。
等级3：本地存储。该文件将只存储在您自己的本地节点。这对于点对点通信很有用，例如聊天程序，用户更关注没有人窃听。这是免费的。

5.补偿机制
Gridcoin的分布式处理模型基于类似网络计算的伯克利开放网络（BOINC）[8]的预审框架，它是一个开源的分布式志愿计算网络，广泛应用于cernVM[10]，由LHC@Home[17]项目治理。这样的框架用来处理长期非均匀财富分配。另一方面，Golem是一个非常好的采用稳健激励模型的项目，可以拿来作为奖励机制的借鉴。但值得注意的是，区块链技术驱动的基于奖励模型的志愿计算网络，如果设计不当，很容易陷入利息膨胀的陷进。所以说，在早期投资者因为初学者运气的因素获得的收益和后来者的获益差距，随着时间的推移会越来越大。
6.未来方向
改进所有节点的时间戳同步，而不需要中心化的NTP服务器。
喜欢奖励基础设施里的激励技术，这样重度投资基础设施的投资人不会遭遇“被忽视”，“亏本”的问题。
支持副本创建的分片技术，尽量减少被BFT会员会拒绝的交易集。
添加零知识证明以增强隐私。
EVM、TVM和Linux容器技术的混合基础设施。
改进虚拟机规范中的二进制数据编码方法，交易签名，收费表等章节。

总结
个人认为，混合共识亦是众望所归，初链在混合共识领域上给我们一个详细的阐述，但希望能将技术落到实处，让初链真正的应用到生活场景当中去。
